<div class="form-modal">
  <form (ngSubmit)="submitForm(form)" #form="ngForm">
    <h1>ðŸ’ª You're One Step Closer to Your Fitness Goal! ðŸš€</h1>

    <!-- Name Field -->
    <input
      type="text"
      name="name"
      [(ngModel)]="formData.name"
      placeholder="Your Name"
      required
      #name="ngModel"
    />
    <div *ngIf="name.invalid && name.touched" class="error">Name is required.</div>

    <!-- Phone Field -->
    <input
      type="tel"
      name="phone"
      [(ngModel)]="formData.phone"
      placeholder="Your Phone"
      pattern="^[0-9]{10}$"
      required
      #phone="ngModel"
    />
    <div *ngIf="phone.invalid && phone.touched" class="error">
      Valid 10-digit phone number required.
    </div>

    <!-- Course Dropdown -->
    <select
      name="course"
      [(ngModel)]="formData.course"
      required
      #course="ngModel"
    >
      <option value="" disabled selected>Select Course</option>
      <option *ngFor="let c of courses" [value]="c">{{ c }}</option>
    </select>
    <div *ngIf="course.invalid && course.touched" class="error">
      Please select a course.
    </div>

    <!-- Message -->
    <textarea
      name="message"
      [(ngModel)]="formData.message"
      placeholder="Submit your query; our team will reach out to you within 24 hours."
    ></textarea>

    <!-- Submit Button -->
    <button type="submit" [disabled]="form.invalid || isSubmitting">
      <ng-container *ngIf="!isSubmitting">Submit</ng-container>
      <ng-container *ngIf="isSubmitting">
        <span class="spinner"></span> Submitting...
      </ng-container>
    </button>

    <!-- Close -->
    <button type="button" (click)="close()">Close</button>
  </form>

  <!-- Submitted Data View and CRUD -->
  <div *ngIf="submittedForms.length > 0">
    <h2>Submitted Queries</h2>
    <table>
      <tr>
        <th>Name</th>
        <th>Phone</th>
        <th>Course</th>
        <th>Message</th>
        <th>Actions</th>
      </tr>
      <tr *ngFor="let entry of submittedForms; let i = index">
        <td>{{ entry.name }}</td>
        <td>{{ entry.phone }}</td>
        <td>{{ entry.course }}</td>
        <td>{{ entry.message }}</td>
        <td>
          <button (click)="editForm(i)">Edit</button>
          <button (click)="deleteForm(i)">Delete</button>
        </td>
      </tr>
    </table>
  </div>
</div>
